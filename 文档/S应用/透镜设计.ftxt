### 节点
地址, 的, 透镜设计, 目录, 的, 的, PPT, 的, 光路, 的, 透镜系统, 的, 动词, 的, 名词, 的, 场景, 的, 光束传播, 的, 更新图形, 的, 库, 的, 成像过程, 的, M代码, 的, 计算像点, 的, 出发代码, 的, 传播代码, 的, 描述, 的, 库, 的, 计算光束, 的, 匹配模板, 的, 转述, 的, P代码, M代码, 的, 透镜, 的, 的, 输出代码, 的, 星图, 的, 测试, P代码, 的, 转述, 匹配模板, 的, 的, 设置图形, 的, 的, 平面, 的, M代码, 的, 高斯光束, 的, 计算光斑直径2, 的, 输出模板, 的, 匹配模板, 的, 计算光斑直径, 的, M代码, M函数, 的, 出发, 的, 匹配模板, 的, 输出模板, 样式, 的, 画光线轨迹, 的, 匹配模板, 的, 输出模板, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 屏幕, iris, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, L4, L3, L2, L1, 的, 光路, 的, 的, 的, 的, 的, 的, 光线, 的, 的, 的, 路径, 初始直径, 初始焦点, 的, 的, 的, 的, 出发, y, 的, x, 的, 焦点, 的, 透镜位置, 的, 样式, 的, PPT, 的, 屏幕, 的, 的, 的, 的, 的, 的, 的, 的, 的, 窗口, 的, 的, 的, 的, 尺寸, 的, 空间点, 在, 的, 的, 空间点, 在, 的, 的, 空间点, 在, 的, 的, 空间点, 在, 的, 光斑, 的, 上面, 的, 的, 空间点, 在, 的, 的, 波长, 的, 直径, 的, 的, 成像过程, 的, 灰尘, 的, 的, 路径, 的, 的, 的, 像, 的, 的, 的, 物, 的, 的, 计算成像过程, 的, 测试, 的, 保存代码, 的, 公式页, html, 计算物距, 的, 出发代码, 的, 传播代码, 的, 成像代码, 成像代码, 传播代码, 出发代码, 的, 的, 的, 计算像距, 的, 库, 的, 物距, 的, 的, 的, 空间点, 在, 像距, 的, 像距, 的, 放大率, 的, 的, 计算放大率, 的, 输出模板, 的, 匹配模板, 的, 放大率测试, 的, 单透镜场景, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 白板, iris, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, L1, 的, 光路, 的, 光线, 的, 的, 的, 的, 的, 的, 路径, 初始直径, 初始焦点, 的, 的, 的, 的, 出发, y, 的, x, 的, 焦点, 的, 透镜位置, 的, 样式, 的, 灰尘, 的, 成像过程, 的, 光斑, 的, 上面, 的, 的, 空间点, 在, 的, 的, 波长, 的, 直径, 的, 的, 的, 路径, 的, 的, 的, 像, 的, 的, 的, 物, 的, 的, 的, 空间点, 在, 放大率, 的, 的, 网页画板, 的, 验证例子, 的, 单透镜, 的, 双透镜, M函数, 的, 双透镜场景, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 白板, iris, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, L2, L1, 的, 光路, 的, 的, 的, 的, 的, 光线, 的, 的, 的, 路径, 初始直径, 初始焦点, 的, 的, 的, 的, 出发, y, 的, x, 的, 焦点, 的, 透镜位置, 的, 样式, 的, 成像过程, 的, 的, 路径, 的, 的, 的, 像, 的, 的, 的, 物, 的, 放大率, 的, 的, 旧版, 焦点, 的, 透镜位置, 的, 焦点, 的, 透镜位置, 的, M代码, 的, 聚焦光束, 的, y, 的, x, 的, y, 的, x, 的, 样式, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, 的, 画成像过程, 的, 输出模板, 的, 匹配模板, y, 的, x, 的, 的, 计算波前, 的, 望远镜场景, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 白板, iris, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 焦距, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, L2, L1, 的, 光路, 的, 的, 的, 的, 的, 光线, 的, 的, 路径, 的, 的, 的, 初始焦点, 的, 的, 的, 初始直径, 的, 的, 出发, y, 的, x, 的, 焦点, 的, 透镜位置, 的, 样式, 的, 成像过程, 的, 的, 路径, 的, 的, 的, 像, 的, 的, 的, 物, 的, 放大率, 的, y, 的, x, 的, 焦点, 的, 透镜位置, 的, 样式, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, 的, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, y, 的, x, 的, 样式, 方向, 朝向, 空间点, 在, 光斑, 灰尘, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, y, 的, x, 的, 的, 保存代码, 计算波前, 的, 光束扫参数, 的, 出发代码, 的, 传播代码, 的, 光斑代码, 的, 保存代码, 的, 例子, 的, 整体框架, 的, 地址, 的, 地址, 句子库, 的, 记忆, 匹配模板, 输出模板, 的, 的, 计算光斑直径, 的, 计算成像过程, 的, 计算成像过程, 
### 关联
#, 2#0, #, #, 3#2, 2#6, #, 2#8, #, 2#10, #, 2#12, #, 2#14, #, 2#16, #, 12#18, #, 12#20, #, 20#22, #, 22#24, #, 24#26, #, 18#28, #, 18#30, #, 18#32, #, 12#34, #, 34#36, #, 36#38, #, 38#40, #, 38#42, #, 42#44, #, #, 47#45, #, 22#47, 18#50, #, 2#52, #, 28#54, #, #, 57#55, #, #, 61#57, 61#58, #, 36#61, 22#64, #, 64#66, #, 2#68, #, 36#70, #, 70#72, #, 70#74, #, 12#76, #, 76#78, #, 78#, 36#81, #, 81#83, #, 81#85, #, #, 36#88, #, 88#90, #, 88#92, #, 16#113, 16#114, 16#115, 16#116, 16#117, 16#118, 16#119, 16#120, 16#121, 16#122, 16#123, 16#124, 16#125, 16#126, 16#127, 16#128, 16#129, 16#130, 16#131, 16#132, #, 131#113, #, 131#115, 131#, #, 131#118, #, 131#120, #, 132#122, #, 132#124, 132#, #, 132#127, #, 132#129, #, #, 16#181, 16#182, 16#183, 16#184, 16#185, 16#186, 16#187, 16#188, 16#189, 16#190, 16#191, 16#192, 16#193, 16#194, 16#195, 16#196, 16#197, 16#198, 16#199, 16#200, 16#201, 16#202, 16#203, 16#204, 16#205, 16#206, 16#207, 16#208, 16#209, 16#210, 16#211, 16#212, 16#213, 16#214, 16#215, 16#216, 16#217, 16#218, 16#219, 16#220, 16#221, 16#222, 16#223, 16#224, 16#225, 16#226, 16#227, 16#228, #, 225#181, #, 225#183, #, 225#185, 225#, #, 225#188, #, 225#190, #, 226#192, #, 226#194, #, 226#196, 226#, #, 226#199, #, 226#201, #, 227#203, #, 227#205, #, 227#207, 227#, #, 227#210, #, 227#212, #, 228#214, #, 228#216, #, 228#218, 228#, #, 228#221, #, 228#223, #, #, #, #, 16#230, #, 230#228, 230#227, 230#226, 230#225, 230#131, 16#237, #, 16#241, 16#242, 16#243, #230, #, #, 237#243, 237#242, 237#241, 16#248, 237#132, #, 237#249, #, 237#251, #, 237#253, #, 237#255, 237#, 16#259, #, 16#261, #271, 259#261, 259#132, 259#228, 259#227, 259#226, 259#225, 259#131, 259#237, 16#271, #, 16#276, 16#277, 16#278, 16#279, #, 271#276, #, 271#278, 16#282, 16#283, #, 271#282, 16#286, 16#287, #, 271#286, 16#290, 16#291, #, 271#290, 16#293, #, 16#295, 237#293, 16#298, 16#299, #, 293#298, 16#302, 16#303, #, 293#302, #, 293#304, 16#307, #, 16#309, #, 16#312, 16#313, #230, 307#312, 16#316, 16#317, #131, 307#316, 16#320, 16#321, #309, 307#320, 12#323, #, 323#325, #, 323#327, #, 325#329, #, 329#, #, 331#333, #, 331#335, #, 331#337, #, #, #, #, 344#338, 344#339, 344#340, #, 323#346, #, 346#348, #, 348#331, 16#352, 16#353, #, 309#352, 327#307, 356#344, #, 346#356, #, 307#358, 36#361, #, 361#363, #, 361#365, #, 2#367, #, 367#369, #, 369#390, 369#391, 369#392, 369#393, 369#394, 369#395, 369#396, 369#397, 369#398, 369#399, 369#400, 369#401, 369#402, 369#403, 369#404, 369#405, 369#406, 369#407, 369#408, 369#409, #, 408#390, #, 408#392, 408#, #, 408#395, #, 408#397, #, 409#399, #, 409#401, 409#, #, 409#404, #, 409#406, #, #, 369#422, 369#423, 369#424, 369#425, 369#426, 369#427, 369#428, 369#429, 369#430, 369#431, 369#432, 369#433, #, 433#422, #, 433#424, #, 433#426, 433#, #, 433#429, #, 433#431, #, 369#435, #, 369#437, #, 435#409, 435#433, 435#408, 369#444, 369#445, 369#446, #435, #, #, 437#446, 437#445, 437#444, 369#451, 437#409, #, 437#452, #, 437#454, #, 437#456, #, 437#458, 437#, 369#462, #, 369#464, #, 369#466, #, 369#468, 437#466, 369#471, 369#472, #, 466#471, 369#475, 369#476, #, 466#475, #, 466#477, 369#481, 369#482, #435, 464#481, 369#485, 369#486, #408, 464#485, 369#489, 369#490, #462, 464#489, 369#493, 369#494, #, 462#493, #, 464#495, 2#498, #, 367#500, #, 500#502, #, 500#504, #, 504#, 367#507, #, 507#528, 507#529, 507#530, 507#531, 507#532, 507#533, 507#534, 507#535, 507#536, 507#537, 507#538, 507#539, 507#540, 507#541, 507#542, 507#543, 507#544, 507#545, 507#546, 507#547, #, 546#528, #, 546#530, 546#, #, 546#533, #, 546#535, #, 547#537, #, 547#539, 547#, #, 547#542, #, 547#544, #, #, 507#572, 507#573, 507#574, 507#575, 507#576, 507#577, 507#578, 507#579, 507#580, 507#581, 507#582, 507#583, 507#584, 507#585, 507#586, 507#587, 507#588, 507#589, 507#590, 507#591, 507#592, 507#593, 507#594, 507#595, #, 594#572, #, 594#574, #, 594#576, 594#, #, 594#579, #, 594#581, #, 595#583, #, 595#585, #, 595#587, 595#, #, 595#590, #, 595#592, #, #, 507#597, #, 597#547, 597#595, 597#594, 597#546, 507#603, #, 507#607, 507#608, 507#609, #597, #, #, 603#609, 603#608, 603#607, 507#614, 603#547, #, 603#615, #, 603#617, #, 603#619, #, 603#621, 603#, 507#625, #, 507#628, 507#629, #597, 625#628, 507#632, 507#633, #546, 625#632, 507#636, 507#637, #547, 625#636, #, 625#638, 18#641, #, #, #642, #, #644, #, 625#646, #, 625#648, #, 652#650, #, 22#652, #, 625#654, #, 625#656, #, 625#658, #, 625#660, 625#, #, 625#663, #, 625#665, #, 625#667, #, 625#669, #, 625#671, #, 625#673, #, 625#675, #, 625#677, #, 625#679, #, 625#681, #, 625#683, #, 625#685, #, 625#687, #, 625#689, #, 625#691, #, 625#693, #, 625#695, #, 625#697, #, 625#699, #, 625#701, 36#704, #, 704#706, #, 704#708, #, #, 625#709, #, 625#711, 2#714, #, 367#716, #, 716#737, 716#738, 716#739, 716#740, 716#741, 716#742, 716#743, 716#744, 716#745, 716#746, 716#747, 716#748, 716#749, 716#750, 716#751, 716#752, 716#753, 716#754, 716#755, 716#756, #, 755#737, #, 755#739, 755#, #, 755#742, #, 755#744, #, 756#746, #, 756#748, 756#, #, 756#751, #, 756#753, #, #, 716#781, 716#782, 716#783, 716#784, 716#785, 716#786, 716#787, 716#788, 716#789, 716#790, 716#791, 716#792, 716#793, 716#794, 716#795, 716#796, 716#797, 716#798, 716#799, 716#800, 716#801, 716#802, 716#803, 716#804, #, 803#781, #, 803#783, #, 803#785, 803#, #, 803#788, #, 803#790, #, 804#792, #, 804#794, #, 804#796, 804#, #, 804#799, #, 804#801, #, #, 716#806, #, 806#756, 806#804, 806#803, 806#755, 716#812, #, 716#815, 716#816, #806, 812#815, 716#819, 716#820, #, 812#819, 716#823, 716#824, #, 812#823, 716#826, 812#756, #, 812#827, #, 812#829, #, 812#831, #, 812#833, 812#, 716#837, #, 716#840, 716#841, #806, 837#840, 716#844, 716#845, #899, 837#844, 716#848, 716#849, #900, 837#848, #, 837#850, #, 837#852, #, 837#854, #, 837#856, #, 837#858, 837#, 716#881, 716#882, 716#883, 716#884, 716#885, 716#886, 716#887, 716#888, 716#889, 716#890, 716#891, 716#892, 716#893, 716#894, 716#895, 716#896, 716#897, 716#898, 716#899, 716#900, #, 899#881, #, 899#883, 899#, #, 899#886, #, 899#888, #, 900#890, #, 900#892, 900#, #, 900#895, #, 900#897, #, #, #, 837#901, #, 837#903, #, 837#905, #, 837#907, #, 837#909, #, 837#911, #, 837#913, #, 837#915, #, 837#917, #, 837#919, #, 837#921, #, 837#923, #, 837#925, #, 837#927, #, 837#929, #, 837#931, #, 837#933, #, 837#935, #, 837#937, #, 837#939, #, 837#941, #, 837#943, #, 837#945, #, 837#947, #, 837#949, #, 837#951, #, 837#953, #, 837#955, #, 837#957, #, 837#959, 18#962, #, #, 12#965, #, 965#967, #, 965#969, #, 965#971, #, 965#973, #, 965#975, #, 965#977, #, 977#979, #, 973#981, #, #36, 984#982, 3#, #, #, 989#985, 989#986, #, 36#989, #323, 984#991, #, 
### 内容
#0, 16:
文档\S应用\透镜设计.ftxt
## end
#2, 502:
+[返回目录](,透镜设计)
地址::文档\S应用\透镜设计.ftxt

PPT::文档\S应用\PPT.ftxt
+[打开文件](+新窗口,PPT)
光路::文档\S应用\光线传播.ftxt
+[打开文件](+新窗口,光路)
透镜系统::文档\物理问题\透镜系统.ftxt
+[打开文件](+新窗口,透镜系统)
星图::文档\S应用\星图.txt
+[打开文件](+新窗口,星图)
高斯光束::文档\物理问题\高斯光束.ftxt
+[打开文件](+新窗口,高斯光束)
网页画板::文档\S应用\网页画板.ftxt
+[打开文件](+新窗口,网页画板)
计算波前::文档\物理问题\计算波前.ftxt
+[打开文件](+新窗口,计算波前)
将计算波前记作计算波前

Nini, 导入PPT的库. Nini, 导入网页画板的库
Nini, 打开计算波前(文件)

动词:...
+[设置动词](,动词)
名词:...
+[设置名词](,名词)

注意! 透镜成像公式的正负号是和光线传播方向有关的. 


场景:...
+[新建阅读窗口](,场景)
放大率测试:...
+[新建阅读窗口](,放大率测试)

## end
#3, 136:
透镜设计:...
创建于 20211008

节点数目统计::
+[设置结构](,节点数目统计)

像距:
的(目录,像距)->+[del](,像距)
的(计算成像过程,库)->+的(库,+像距)->+的(+像距,计算像距)
[]=>计算像距=>+[显示](,计算像距)

## end
#6, 15:
文档\S应用\PPT.ftxt
## end
#8, 16:
文档\S应用\光线传播.ftxt
## end
#10, 17:
文档\物理问题\透镜系统.ftxt
## end
#12, 133:
+[返回目录](,动词)


光束传播:...
更新图形:...

计算光斑直径:...
计算成像过程:...

光束扫参数:...
光束扫参数的"光束传播"替换为"光束扫参数"

描述:...

+[新建阅读窗口](,光束传播)
+[新建阅读窗口](,更新图形)

## end
#16, 920:
+[返回目录](,场景)
+[删除结构](,场景)
+[显示星图](,场景)


+iris, +屏幕都是平面. +L1, +L2, +L3, +L4都是透镜

L1是高20, 宽5的透镜. L2是高20, 宽5的透镜. L3是高100, 宽10的透镜. L4是高100, 宽10的透镜
L1距离iris为(100,0). L2距离L1为(100,0). L3距离L2为(50,0). L4距离L3为(100,0). 屏幕距离L4为(100,0)
设置L1的焦距为inf. 设置L2的焦距为-20. 设置L3的焦距为70. 设置L4的焦距为50
L1的焦距是"inf". L1的焦距是什么

光路::
光路由L1, L2, L3, L4, 屏幕构成
光线::
光线由+初始焦点, +初始直径, +路径构成
光线的路径是光路. 光线的初始焦点是"-100". 光线的初始直径是"6,3,1". 光线的路径是什么
光线从iris出发. 画出光线的传播轨迹

光线的初始焦点是"-150". 画出光线的传播轨迹
光线的初始直径是什么
+[显示PPT图形](,光线)

PPT::output\test.pptx
+[PPT场景输出](PPT,PPT)
+[打开](,PPT)
PPT由+屏幕构成. iris, L1, L2, L3, L4, 屏幕, 光线, 都是PPT的一部分

窗口::
窗口都是矩形
窗口的尺寸是(450,200). 窗口在(0,-100)
+[显示PPT场景](,PPT)
+[显示PPT图形](,窗口)

光斑::
+上面(光线,光斑)
光斑距离L1为(100,0). 光斑的波长是"800e-9". 计算光斑的直径. 光斑的直径是什么


成像过程::
灰尘::
成像过程的路径是光路. 成像过程的像是屏幕. 成像过程的物是灰尘. 成像过程的物是什么
灰尘在(0,0)
计算成像过程的放大率和像距. 计算成像过程的放大率和物距
屏幕在什么位置. 灰尘在什么位置. 成像过程的放大率是什么

有问题, 上面两个过程不互逆. 


是([动作库],动作)->+[打开文件](+新窗口,动作)

+[显示PPT场景](,场景)
## end
#18, 2320:
"""
+[返回目录](,光束传播)

出发代码:...
传播代码:...
输出代码:...

计算像点:...
+[新建阅读窗口](,保存代码)
保存代码:...

旧版:...

[成像过程]

"""

+光束传播(_光束,)->+[del](,+光束传播)...
->的(光束传播,出发代码)->的(光束传播,传播代码)...
->的(光束传播,保存代码)...

->的(_光束,路径)->路径(,_光路)...
->的(_光束,初始焦点)...
->+[临时文本]->[]{
    出发(_光束,_激光)->_激光->在(_激光,空间点)...
    ->+[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],初始焦点)...
    ->+[增加内容](,+[临时文本])
}->+[临时文本]#2->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[修改内容](+[临时文本]#2,+[增加内容])...
    ->+[标题](_M,)->+[模板文本](传播代码,+[临时文本]#2)...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->+[增加内容](+[临时文本]#2,+[临时文本])...

->+[修改内容](+[临时文本],保存代码)...
->+[matlab](Matlab,)->+[code](+[matlab],+[临时文本])...
->[]{[]:
    ->的(_光束,透镜位置)->+[o]"X"(+[matlab],透镜位置),
    ->+的(_光束,+透镜位置)->+[o]"X"(+[matlab],+透镜位置)
}->[]{[]:
    ->的(_光束,焦点)->+[o]"V"(+[matlab],焦点),
    ->+的(_光束,+焦点)->+[o]"V"(+[matlab],+焦点)
}...

->[]{[]:
    ->的(_光束,x)->的(_光束,y),
    ->+的(_光束,+x)->+的(_光束,+y)
}->+[更新图形](+聚焦光束,_光束)->+[del](,+聚焦光束);





+光束传播(_成像过程,)->+[del](,+光束传播)...
->的(光束传播,出发代码)->的(光束传播,传播代码)->的(光束传播,输出代码)...
->的(光束传播,保存代码)...

->的(_成像过程,路径)->路径(,_光路)...
->+[临时文本]->[]{
    的(_成像过程,物)->物(,_物)->在(_物,空间点)...
    ->+[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+初始焦点)...
    ->+初始焦点"0"->+[del](,+初始焦点)...
    ->+[增加内容](,+[临时文本])
}->+[临时文本]#2->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[修改内容](+[临时文本]#2,+[增加内容])...
    ->+[标题](_M,)->+[模板文本](传播代码,+[临时文本]#2)...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->+[增加内容](+[临时文本]#2,+[临时文本])...
->[]{
    的(_成像过程,像)->像(,_像)->在(_像,空间点)...
    ->+[标题](_像,)...
    ->+[模板文本](输出代码,+[增加内容]#3)->+[增加内容]#3(,+[临时文本])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])
}...

->+[修改内容](+[临时文本],保存代码)...

->+[matlab](Matlab,)->+[code](+[matlab],+[临时文本])...
->[]{[]:
    ->的(_成像过程,透镜位置)->+[o]"X"(+[matlab],透镜位置),
    ->+的(_成像过程,+透镜位置)->+[o]"X"(+[matlab],+透镜位置)
}->[]{[]:
    ->的(_成像过程,焦点)->+[o]"V"(+[matlab],焦点),
    ->+的(_成像过程,+焦点)->+[o]"V"(+[matlab],+焦点)
}...

->[]{[]:
    ->的(__成像过程,x)->的(_成像过程,y),
    ->+的(_成像过程,+x)->+的(_成像过程,+y)
}->+[更新图形](+成像过程,_成像过程)->+[del](,+成像过程);



## end
#20, 151:
"""
+[返回目录](,更新图形)

库:...

"""

+更新图形(_类型,_图形)...
->的(更新图形,库)->的(库,_画图)->[eq](_类型,_画图)...
->+[做](+更新图形,_图形)->+[code](+[做],_画图)...

->+[del](,+更新图形)




## end
#22, 126:
+[返回目录](,库)
+[粘贴](,库)

成像过程:...
成像过程的"聚焦光束"替换为"成像过程"
聚焦光束:...
透镜:...
平面:...

+[复制结构](,聚焦光束)->+[粘贴](,库)->+[修改标题]"成像过程"(,聚焦光束)


## end
#24, 396:
"""
+[返回目录](,成像过程)
M代码:...

"""

+成像过程(更新图形,_图形)->+[del](,+成像过程)...
->的(成像过程,M代码)...
->的(_图形,焦点)->的(_图形,透镜位置)...
->的(_图形,物)->物(,_物)->的(_物,y#0)...
->的(_图形,x)->的(_图形,y)...
->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"v"(+[matlab],焦点)...
->+[.]"y0"(+[matlab],y#0)->+[.]"pos"(+[matlab],透镜位置)...
->+[o](+[matlab],x)->+[o](+[matlab],y):
    ->样式(_图形,)->+[修改内容]"曲线"(,样式),
    ->+样式"曲线"(_图形,)


## end
#26, 568:
%{
+[M函数](,M代码)
%}

% d0=1;
% f=[1,1,1,1];
% pos=[0,2,4,6,8];

u=pos+v;
u=pos-u([1,1:end-1]);
M=v./u;

% r=[max(y0);max(y0)];
r=[max(y0);max(y0)];
x=ones(size(r))*pos;
y=zeros(size(x));
y(:,1)=r;
dy=r;
for i=1:length(v)-1
    Dx=pos(i+1)-pos(i);
    if v(i)==0
        if Dx~=0
            r=[max(y0);-max(y0)]/2;
        end
    else
        dy=-M(i)*dy;
        Dy=-Dx/v(i)*(r-dy);
        r=r+Dy;
    end
    y(:,i+1)=r;
end

plot(x',y')
x=[x(1,:),flip(x(2,:))];
y=[y(1,:),flip(y(2,:))];

%{
+[M函数](,M代码)
+[matlab]"fliplr(x(:,1)')"(Matlab,)
+[matlab]"x"(Matlab,)
%}
## end
#28, 146:
%{
+[M函数](,计算像点)
测试:...
%}


x=0;
pos=[0,1,2,3,4];
f=[3,3,3,3,3];
v=1;

V=v;
X=x;

u=v+x0-pos(1);
v=f(1)*u/(u-f(1));
x=pos(1);
V=[V,v];
X=[X,x];


## end
#30, 39:
p=[%空间点];
x=p(1);
v=%初始焦点;

V=v;
X=x;


## end
#32, 81:

% %[标题]
p=[%空间点];
u=p(1)-(v+x);
rv=1/%焦距-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

## end
#34, 508:
"""
+[返回目录](,描述)
库:...
将库(节点)记作句子库
+[新建阅读窗口](,库)

是([名词库],名词)->+[打开文件](+新窗口,名词)

"""
+描述(_句子,_结构)->+[del](,+描述)...
->的(描述,库)...
->的(库,_模板)->的(_模板,匹配模板)->[模式匹配](匹配模板,_句子)...
->+[临时文本]->[]{
    []:->的(_模板,转述)->+[做](_句子,+[临时文本])->+[code](+[做],转述)...
    ->+匹配模板(+[做],匹配模板)->+[del](,+匹配模板),
    ->的(_模板,输出模板)->+[转述](_句子,+[临时文本])...
    ->+匹配模板(+[转述],匹配模板)->+[del](,+匹配模板)...
    ->+输出模板(+[转述],输出模板)->+[del](,+输出模板)
}...

->+[复制内容](,+[临时文本])->+[修改内容](+[临时文本],+[显示]):
    ->_结构->+[修改内容](+[临时文本],_结构),
    ->[]





## end
#36, 311:
+[返回目录](,库)
+[复制结构](,设置图形)

计算光束:%[光束]从%[激光]出发, 初始焦点是%[焦点], 初始直径是%[直径], 经过%[路径], 最终到达%[屏幕]
设置图形:%[元件]都是(透镜|光束)...

计算光斑直径:计算%[光斑]的直径...
计算光斑直径2:...
+[复制结构](,计算光斑直径)->+[粘贴](,库)->+[修改标题]"计算光斑直径2"(,计算光斑直径)

计算放大率:计算%[过程]的放大率和%[物距]...
出发:%[光线]从%[位置]出发...

画光线轨迹:画出%[光线]的传播轨迹...
画成像过程:画出%[过程]的光线路线...

+[复制结构](,出发)


## end
#38, 103:
+[返回目录](,设置图形)

匹配模板::%[光束]从%[激光]出发, 初始焦点是%[焦点], 初始直径是%[直径], 经过%[段落], 最终到达%[屏幕]
转述:...
+[新建阅读窗口](,转述)


## end
#40, 57:
%[光束]从%[激光]出发, 初始焦点是%[焦点], 初始直径是%[直径], 经过%[段落], 最终到达%[屏幕]
## end
#42, 230:
"""
+[返回目录](,转述)
P代码:...

"""

+转述(_输入,_输出)->+[del](,+转述)...
->的(转述,P代码)->匹配模板(+转述,_匹配模板)...
->+[python](Python,)->+[code](+[python],P代码)...
->+[.]"pat"(+[python],_匹配模板)->+[.]"sent"(+[python],_输入)...
->+[o]"code"(+[python],_输出)



## end
#44, 533:
"""
+[P函数](,P代码)

测试(P函数):...

"""

words=re.findall('%(\[[^\[^\]]*\])',pat)
pat=re.sub('%\[[^\[^\]]*\]',r"([\\s\\S]*)",pat)
name=re.search(pat,sent)
elements=name.group(5).split(', ')

path=""
for ele in elements:
    path="->+经过(+[光束传播],%s)->+[del](,+经过)...\n"%(ele)+path

code="""的(%s,初始焦点)->+[修改内容]"%s"(,初始焦点)...
->的(%s,初始直径)->+[修改内容]"%s"(,初始直径)...
->+[光束传播](%s,)->+[出发](+[光束传播],%s)...
%s->+[到达](+[光束传播],%s)"""%(name.group(1),name.group(3),name.group(1),name.group(4),name.group(1),name.group(2),path,name.group(6))
print(code)


## end
#45, 205:
%{
+[M函数](,M代码)
%}


% siz=[5,20];
if isinf(f)
    D=0;
else
    D=sign_1(f)*siz(1);
end

L=siz(2);
x=[-D/2,0,D/2,nan,0,0,nan,-D/2,0,D/2];
y=[L/2-D/2,L/2,L/2-D/2,nan,L/2,-L/2,nan,-L/2+D/2,-L/2,-L/2+D/2];


## end
#47, 360:
"""
+[返回目录](,透镜)
M代码:...

"""

+透镜(更新图形,_图形)->+[del](,+透镜)...
->的(透镜,M代码)...
->的(_图形,x)->的(_图形,y)...
->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"siz"(+[matlab],更新图形)...
->+[o](+[matlab],x)->+[o](+[matlab],y)...
->样式(_图形,)->+[修改内容]"曲线"(,样式):
    ->的(_图形,焦距)->[]{[]=>[==](,焦距)}->+[.]"f"(+[matlab],焦距),
    ->+[.]"f"(+[matlab],+[临时文本])->+[临时文本]"inf"



## end
#50, 66:

% %[标题]
p=[%空间点];
u=p(1)-(v+x);
v=-u;
x=p(1);
V=[V,v];
X=[X,x];


## end
#52, 13:
文档\S应用\星图.txt
## end
#54, 357:
%{
+[M函数](,测试)
%}
p=[0,0];
x=p(1);
v=inf;

V=v;
X=x;


% L1
p=[0,0];
u=v+x0-p(1);
rv=1/-20-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L2
p=[100.0, 0.0];
u=v+x0-p(1);
rv=1/20-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L3
p=[200.0, 0.0];
u=v+x0-p(1);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L4
p=[300.0, 0.0];
x=p(1);
X=[X,x];

V
X

%{
+[M函数](,测试)
%}
## end
#55, 836:
"""
+[P函数](,P代码)

测试(P函数):...

"""

words=re.findall('%(\[[^\[^\]]*\])',pat)
pat=re.sub('%\[[^\[^\]]*\]',r"([\\s\\S]*)",pat)
name=re.search(pat,sent)
elements=name.group(1)

if name.group(2)=="透镜":
    code=elements.replace(', ','->')+"""=>[那](_,)...
=>+在(_,+空间点)->+空间点"0,0"...
->+朝向(_,+方向)->+方向"0"...
->+样式"曲线"(_,)...
->+的(_,+x)->+的(_,+y)...
->+的(_,+焦距)->+[更新图形]\"5,20\"(+透镜,_)->+[del](,+透镜)"""

elif name.group(2)=="光束":
    code=elements.replace(', ','->')+"""=>[那](_,)...
=>+在(_,+空间点)->+空间点"0,0"...
->+朝向(_,+方向)->+方向"0"...
->+样式"曲线"(_,)...
->+的(_,+x)->+的(_,+y)...
->+的(_,+初始直径)->+的(_,+初始焦点)->+的(_,+透镜位置)->+的(_,+焦点)"""

elif name.group(2)=="平面":
    code=elements.replace(', ','->')+"""=>[那](_,)...
=>+在(_,+空间点)->+空间点"0,0"...
->+朝向(_,+方向)->+方向"0"...
->+样式"曲线"(_,)...
->+的(_,+x)->+的(_,+y)...
->+[更新图形]\"20\"(+平面,_)->+[del](,+平面)"""



## end
#57, 230:
"""
+[返回目录](,转述)
P代码:...

"""

+转述(_输入,_输出)->+[del](,+转述)...
->的(转述,P代码)->匹配模板(+转述,_匹配模板)...
->+[python](Python,)->+[code](+[python],P代码)...
->+[.]"pat"(+[python],_匹配模板)->+[.]"sent"(+[python],_输入)...
->+[o]"code"(+[python],_输出)



## end
#58, 17:
%[元件]都是(透镜|光束|平面)
## end
#61, 51:
+[返回目录](,设置图形)


匹配模板::%[元件]都是(透镜|光束|平面)
转述:...




## end
#64, 253:
"""
+[返回目录](,透镜)
M代码:...

"""

+平面(更新图形,_图形)->+[del](,+平面)...
->的(平面,M代码)...
->的(_图形,x)->的(_图形,y)...
->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"siz"(+[matlab],更新图形)...
->+[o](+[matlab],x)->+[o](+[matlab],y)...
->样式(_图形,)->+[修改内容]"曲线"(,样式)



## end
#66, 52:
%{
+[M函数](,M代码)
%}


L=siz;
x=[0,0];
y=[L/2,-L/2];


## end
#68, 17:
文档\物理问题\高斯光束.ftxt
## end
#70, 115:
+[返回目录](,计算光斑直径)


匹配模板::^计算%[光斑]的直径\(单位: %[单位]\)$
输出模板::+[计算光斑直径](,%[光斑])->+单位"%[单位]"(+[计算光斑直径],)->+[del](,+单位)



## end
#72, 55:
+[计算光斑直径](,%[光斑])->+单位"%[单位]"(+[计算光斑直径],)->+[del](,+单位)
## end
#74, 25:
^计算%[光斑]的直径\(单位: %[单位]\)$
## end
#76, 833:
"""
M代码(M函数):...
+[新建阅读窗口](,M代码)

"""

+计算光斑直径(,_光斑)->+[del](,+计算光斑直径)...
->的(计算光斑直径,M代码)...
->上面(_光束,_光斑)->_光束(,)...
->的(_光束,焦点)->的(_光束,透镜位置)->的(_光束,y)...
->在(_光斑,空间点)...

->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"f0"(+[matlab],焦点)->+[.]"x0"(+[matlab],透镜位置)...
->+[.]"pt0"(+[matlab],空间点)->+[.]"y0"(+[matlab],y)...
->[]{
    []:->单位(+计算光斑直径,)->+[s]"unit"(+[matlab],单位),
        ->+[s]"unit"(+[matlab],+[临时文本])->+[临时文本]"m"
}->[]:
    ->的(_光斑,直径)->+[o]"d"(+[matlab],直径),
    ->+的(_光斑,+直径)->+[o]"d"(+[matlab],+直径);



+计算光斑直径(_光束,_光斑)->+[del](,+计算光斑直径)...
->的(计算光斑直径,M代码)...
->的(_光束,焦点)->的(_光束,透镜位置)->的(_光束,y)...
->在(_光斑,空间点)->的(_光斑,直径)...

->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"f0"(+[matlab],焦点)->+[.]"x0"(+[matlab],透镜位置)...
->+[.]"pt0"(+[matlab],空间点)->+[.]"y0"(+[matlab],y)...
->+[o]"d"(+[matlab],直径)




## end
#78, 589:
%{
+[M函数](,M代码)
Nini, 打开高斯光束(文件)
%}


addpath('Matlab\optics');

lm=800e-9;

f=f0*1e-3;
y=y0(1,1:length(f0))*1e-3;
x=x0(1,1:length(f0))*1e-3;
z=pt0(1)*1e-3;

i=max(find(z>x(1:end-1)));
z0=x(i)+f(i);
w=y(i);
N=f(i)/2/w;
w0=2*N/pi*lm;
% the following equation is incorrect, because the input isn't the real diameter
% w0=sqrt((w^2-sqrt(w^4-4*(lm*f(i)/pi)^2))/2);

%w0
d=2*GaussianBeam_w(z,w0,lm,z0);

if strcmp(unit,'mm')
    d=d/1e-3;
elseif strcmp(unit,'cm')
    d=d/1e-2;
elseif strcmp(unit,'um')
    d=d/1e-6;
end

disp(sprintf('Diameter: %.2f %s',d,unit))

%{
记住"Matlab"
+[M函数](,M代码)
%}
## end
#81, 116:
+[返回目录](,出发)

匹配模板::%[光线]从%[位置]出发
输出模板::%[光线]->%[位置]->[]{[]:
    ->出发(%[光线],)->+[右连](出发,%[位置]),->+出发(%[光线],%[位置])
}

## end
#83, 13:
%[光线]从%[位置]出发
## end
#85, 75:
%[光线]->%[位置]->[]{[]:
    ->出发(%[光线],)->+[右连](出发,%[位置]),->+出发(%[光线],%[位置])
}
## end
#86, 2:
曲线
## end
#88, 80:
+[返回目录](,画光线轨迹)

匹配模板::画出%[光线]的传播轨迹
输出模板::+[光束传播](%[光线],)->+[显示PPT图形](,%[光线])



## end
#90, 12:
画出%[光线]的传播轨迹
## end
#92, 35:
+[光束传播](%[光线],)->+[显示PPT图形](,%[光线])
## end
#113, 11:
10.0, -10.0
## end
#115, 8:
0.0, 0.0
## end
#117, 2:
曲线
## end
#118, 1:
0
## end
#120, 23:
401.17723362335863, 0.0
## end
#122, 11:
10.0, -10.0
## end
#124, 8:
0.0, 0.0
## end
#126, 2:
曲线
## end
#127, 1:
0
## end
#129, 3:
0,0
## end
#181, 2:
50
## end
#183, 60:
45.0, 50.0, 45.0, nan, 50.0, -50.0, nan, -45.0, -50.0, -45.0
## end
#185, 50:
-5.0, 0.0, 5.0, nan, 0.0, 0.0, nan, -5.0, 0.0, 5.0
## end
#187, 2:
曲线
## end
#188, 1:
0
## end
#190, 10:
350.0, 0.0
## end
#192, 2:
70
## end
#194, 60:
45.0, 50.0, 45.0, nan, 50.0, -50.0, nan, -45.0, -50.0, -45.0
## end
#196, 50:
-5.0, 0.0, 5.0, nan, 0.0, 0.0, nan, -5.0, 0.0, 5.0
## end
#198, 2:
曲线
## end
#199, 1:
0
## end
#201, 10:
250.0, 0.0
## end
#203, 3:
-20
## end
#205, 60:
12.5, 10.0, 12.5, nan, 10.0, -10.0, nan, -12.5, -10.0, -12.5
## end
#207, 50:
2.5, 0.0, -2.5, nan, 0.0, 0.0, nan, 2.5, 0.0, -2.5
## end
#209, 2:
曲线
## end
#210, 1:
0
## end
#212, 10:
200.0, 0.0
## end
#214, 3:
inf
## end
#216, 60:
10.0, 10.0, 10.0, nan, 10.0, -10.0, nan, -10.0, -10.0, -10.0
## end
#218, 50:
-0.0, 0.0, 0.0, nan, 0.0, 0.0, nan, -0.0, 0.0, 0.0
## end
#220, 2:
曲线
## end
#221, 1:
0
## end
#223, 10:
100.0, 0.0
## end
#242, 5:
6,3,1
## end
#243, 4:
-100
## end
#249, 382:
3.0, 6.0, 9.0, 33.0, 33.85714285714286, -0.35849333675976425, 0.35849333675976425, -33.85714285714286, -33.0, -9.0, -6.0, -3.0, 1.5, 3.0, 4.5, 16.5, 16.92857142857143, -0.17924666837988212, 0.17924666837988212, -16.92857142857143, -16.5, -4.5, -3.0, -1.5, 0.5, 1.0, 1.5, 5.5, 5.642857142857143, -0.059748889459961596, 0.059748889459961596, -5.642857142857143, -5.5, -1.5, -1.0, -0.5
## end
#251, 316:
0.0, 100.0, 200.0, 250.0, 350.0, 401.17723362335863, 401.17723362335863, 350.0, 250.0, 200.0, 100.0, 0.0, 0.0, 100.0, 200.0, 250.0, 350.0, 401.17723362335863, 401.17723362335863, 350.0, 250.0, 200.0, 100.0, 0.0, 0.0, 100.0, 200.0, 250.0, 350.0, 401.17723362335863, 401.17723362335863, 350.0, 250.0, 200.0, 100.0, 0.0
## end
#253, 83:
-100.0, -200.0, -18.75, -3849.9999999999936, 50.64102564102564, -0.5362079823329964
## end
#255, 51:
0.0, 100.0, 200.0, 250.0, 350.0, 401.17723362335863
## end
#257, 2:
曲线
## end
#259, 16:
output\test.pptx
## end
#276, 7:
450,200
## end
#278, 6:
0,-100
## end
#282, 6:
0,-100
## end
#286, 6:
0,-100
## end
#290, 6:
0,-100
## end
#298, 10:
200.0, 0.0
## end
#302, 6:
800e-9
## end
#304, 20:
0.017998999068761408
## end
#323, 752:
"""
测试:...
+[新建阅读窗口](,测试)
保存代码:...
+[新建阅读窗口]

库:...

Nini, 透镜设计的计算成像过程是什么?
记住计算成像过程(节点)
公式可能有正负号问题, 暂时不管
+[复制结构](,计算成像过程)

"""

+计算成像过程(,_过程)->+[del](,+计算成像过程)...
->的(计算成像过程,保存代码)...
->的(计算成像过程,库)->的(库,物距)->的(库,像距)...

->的(_过程,像)->像(,_像)->在(_像,空间点#0)...
->的(_过程,物)->物(,_物)->在(_物,空间点#1)...
->的(_过程,路径)->路径(,_光路)->_光路(,)...

->+[做](保存代码,_过程)->+[显示](,保存代码)...
->+成像(+[做],空间点#0)->+[del](,+成像)...
->+物体(+[做],空间点#1)->+[del](,+物体)...
->+光路(+[做],_光路)->+[del](,+光路)...

->+[matlab](Matlab,)->+[code](+[matlab],保存代码)...
->[]{
    []:->的(_过程,放大率)->放大率->+[o]"M"(+[matlab],放大率),
    ->+的(_过程,+放大率)->+[o]"M"(+[matlab],+放大率)
}...

->[]{[]:
    ->计算物距(+计算成像过程,)->+[code](+[做],物距)->+[o]"pt"(+[matlab],空间点#1),
    ->+[code](+[做],像距)->+[o]"pt"(+[matlab],空间点#0)
}









## end
#325, 376:
%{
+[M函数](,测试)

公式页(html):...
+[H函数](,公式页)
%}
p=[0,0];
x0=p(1);
v=0;

V=v;
X=x;
M=1;


% L1
p=[50,0];
u=v+x0-p(1);
rv=1/-20-1/u;
v=1/rv;
x=p(1);
M=M*v/u;
V=[V,v];
X=[X,x];

% L2
p=[100.0, 0.0];
u=v+x0-p(1);
rv=1/20-1/u;
v=1/rv;
x=p(1);
M=M*v/u;
V=[V,v];
X=[X,x];

% L3
p=[200.0, 0.0];
u=v+x0-p(1);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
M=M*v/u;
V=[V,v];
X=[X,x];




%{
+[M函数](,测试)
%}
## end
#327, 614:
%{
+[M函数](,保存代码)
%}

% %[标题]
p=[900.0, 0.0];
x=p(1);
u=0;

U=[];
X=[];
M=1;


% L3
p=[700.0, 0.0];
v=(x-u)-p(1);
ru=1/-200-1/v;
u=1/ru;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
U=[U,u];
X=[X,x];

% L2
p=[500.0, 0.0];
v=(x-u)-p(1);
ru=1/200-1/v;
u=1/ru;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
U=[U,u];
X=[X,x];

% L1
p=[200.0, 0.0];
v=(x-u)-p(1);
ru=1/-400-1/v;
u=1/ru;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
U=[U,u];
X=[X,x];

% L0
p=[0,0];
v=(x-u)-p(1);
ru=1/400-1/v;
u=1/ru;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
U=[U,u];
X=[X,x];

pt=[x-u,0];

disp(sprintf('Magnification: %.4e',M));

%{
+[M函数](,保存代码)
%}
## end
#329, 525:
<!--
+[H函数](,公式页)
-->

The basic formula,
$$
\frac{1}{f}=\frac{1}{u}+\frac{1}{v}
$$
The magnification is,
$$
M=\frac{v}{u}=\frac{v}{f}-1
$$

Here the distance from image to the lens is \(v\), and \(u\) is from object to the lens. <br>
By multiplying the magnification with the object, you will have the size of the image. 
<br><br><br>

In the program, the \(X\) is the location of lens in the lab frame. \(V\) is relative position of the image to the lens. <br>
So the position of an image is \(X+V\). 

<!--
+[H函数](,公式页)
--
## end
#331, 28:

出发代码:...
传播代码:...
成像代码:...

## end
#333, 71:
%{
+[M函数](,保存代码)
%}

% %[标题]
p=[%空间点];
x=p(1);
u=0;

U=[];
X=[];
M=1;


## end
#335, 114:

% %[标题]
p=[%空间点];
v=(x-u)-p(1);
ru=1/%焦距-1/v;
u=1/ru;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
U=[U,u];
X=[X,x];

## end
#337, 74:

pt=[x-u,0];

disp(sprintf('Magnification: %.4e',M));

%{
+[M函数](,保存代码)
%}
## end
#338, 75:

pt=[x+v,0];

disp(sprintf('Magnification: %.4e',M));


%{
+[M函数](,保存代码)
%}
## end
#339, 114:

% %[标题]
p=[%空间点];
u=p(1)-(v+x);
rv=1/%焦距-1/u;
v=1/rv;
x=p(1);
if ~isnan(v/u)
    M=-M*v/u;
end
V=[V,v];
X=[X,x];

## end
#340, 71:
%{
+[M函数](,保存代码)
%}

% %[标题]
p=[%空间点];
x=p(1);
v=0;

V=[];
X=[];
M=1;


## end
#344, 28:

出发代码:...
传播代码:...
成像代码:...

## end
#346, 31:

物距:...
像距:...
物距的"像距"替换为"物距"


## end
#348, 612:
"""
计算物距:...

"""

+物距(_代码,_过程)->+[del](,+物距)...
->的(物距,计算物距)...
->的(计算物距,出发代码)->的(计算物距,传播代码)->的(计算物距,成像代码)...
->物体(+物距,_物体位置)->成像(+物距,_像位置)->光路(+物距,_光路)...

->+[临时文本]->[]{
    +[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],_像位置)...
    ->+[增加内容](,+[临时文本])
}...

->+[临时文本]#2->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[标题](_M,)->+[模板文本](传播代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->+[增加内容](+[临时文本]#2,+[临时文本])...

->+[增加内容](成像代码,+[临时文本])...

->+[修改内容](+[临时文本],_代码)





## end
#352, 22:
45.15753086150818, 0.0
## end
#354, 650:
"""
计算像距:...

"""

+像距(_代码,_过程)->+[del](,像距)...
->的(像距,计算像距)...
->的(计算像距,出发代码)->的(计算像距,传播代码)->的(计算像距,成像代码)...
->物体(+像距,_物体位置)->成像(+像距,_像位置)->光路(+像距,_光路)...

->+[临时文本]->[]{
    +[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],_物体位置)...
    ->+[增加内容](,+[临时文本])
}...

->+[临时文本]#2->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[修改内容](+[临时文本]#2,+[增加内容])...
    ->+[标题](_M,)->+[模板文本](传播代码,+[临时文本]#2)...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->+[增加内容](+[临时文本]#2,+[临时文本])...

->+[增加内容](成像代码,+[临时文本])...

->+[修改内容](+[临时文本],_代码)





## end
#356, 683:
"""
计算像距:...
+[新建阅读窗口](,计算像距)
+[复制结构](,计算像距)

"""

+像距(_代码,_过程)->+[del](,+像距)...
->的(像距,计算像距)...
->的(计算像距,出发代码)->的(计算像距,传播代码)->的(计算像距,成像代码)...
->物体(+像距,_物体位置)->成像(+像距,_像位置)->光路(+像距,_光路)...

->+[临时文本]->[]{
    +[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],_物体位置)...
    ->+[增加内容](,+[临时文本])
}...

->+[临时文本]#2->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[修改内容](+[临时文本]#2,+[增加内容])...
    ->+[标题](_M,)->+[模板文本](传播代码,+[临时文本]#2)...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->+[增加内容](+[临时文本]#2,+[临时文本])...

->+[增加内容](成像代码,+[临时文本])...

->+[修改内容](+[临时文本],_代码)





## end
#358, 18:
1.2840325233952017
## end
#361, 73:
匹配模板::计算%[过程]的放大率和%[物距]
输出模板::+[计算成像过程](,%[过程])->+[计算%[物距]](+[计算成像过程],)


## end
#363, 41:
+[计算成像过程](,%[过程])->+[计算%[物距]](+[计算成像过程],)
## end
#365, 17:
计算%[过程]的放大率和%[物距]
## end
#367, 126:
+[返回目录](,放大率测试)

验证例子:...
+[新建阅读窗口](,验证例子)

单透镜场景:...
双透镜场景:...
望远镜场景:...
望远镜场景的"双透镜"替换为"望远镜"



是([动词库],动词)->+[打开文件](+新窗口,动词)
## end
#369, 978:
+[返回目录](,单透镜场景)
+[删除结构](,单透镜场景)
+[显示星图](,单透镜场景)


+iris, +白板都是平面. +L1都是透镜

L1是高20, 宽5的透镜. L1的焦距是"100"
L1距离iris为(100,0). 白板距离L1为(100,0)
L1的焦距是什么

光路::
光路由iris, L1, 白板构成
光线::
光线由+初始焦点, +初始直径, +路径构成
光线的路径是光路. 光线的初始焦点是"-50". 光线的初始直径是"6,3,1". 光线的路径是什么
光线从iris出发. 画出光线的传播轨迹

光线的初始焦点是"-150". 画出光线的传播轨迹
光线的初始直径是什么
+[显示PPT图形](,光线)

PPT::output\test.pptx
+[PPT场景输出](PPT,PPT)
+[打开](,PPT)
PPT由+屏幕构成. iris, L1, L2, L3, L4, 屏幕, 光线, 都是PPT的一部分

窗口::
窗口都是矩形
窗口的尺寸是(450,200). 窗口在(0,-100)
+[显示PPT场景](,PPT)
+[显示PPT图形](,窗口)

光斑::
+上面(光线,光斑)
光斑距离L1为(20,0). 光斑的波长是"800e-9". 计算光斑的直径. 光斑的直径是什么

成像过程::
灰尘::
成像过程的路径是光路. 成像过程的像是白板. 成像过程的物是灰尘. 成像过程的物是什么
灰尘在(0,0)
计算成像过程的放大率和像距. 
计算成像过程的放大率和物距. 成像过程的放大率是什么
白板在什么位置. 灰尘在什么位置. 成像过程的放大率是什么

L1的焦距是"100". L1的焦距是什么. 白板距离L1为(50,0)
L1在什么位置. 白板在什么位置. 成像过程的物是什么. 成像过程的像是什么
计算成像过程的放大率和物距. 灰尘在什么位置. 成像过程的放大率是什么


L1的焦距是"100". L1的焦距是什么. 灰尘距离L1为(-150,0)
L1在什么位置. 白板在什么位置. 成像过程的物是什么. 成像过程的像是什么
计算成像过程的放大率和像距. 白板在什么位置. 成像过程的放大率是什么
计算成像过程的放大率和物距
白板在什么位置

+[显示PPT场景](,单透镜场景)
## end
#390, 11:
10.0, -10.0
## end
#392, 8:
0.0, 0.0
## end
#394, 2:
曲线
## end
#395, 1:
0
## end
#397, 10:
400.0, 0.0
## end
#399, 11:
10.0, -10.0
## end
#401, 8:
0.0, 0.0
## end
#403, 2:
曲线
## end
#404, 1:
0
## end
#406, 3:
0,0
## end
#422, 3:
100
## end
#424, 56:
7.5, 10.0, 7.5, nan, 10.0, -10.0, nan, -7.5, -10.0, -7.5
## end
#426, 50:
-2.5, 0.0, 2.5, nan, 0.0, 0.0, nan, -2.5, 0.0, 2.5
## end
#428, 2:
曲线
## end
#429, 1:
0
## end
#431, 10:
100.0, 0.0
## end
#445, 5:
6,3,1
## end
#446, 3:
-50
## end
#452, 130:
3.0, 3.0, 9.0, 6.0, -6.0, -9.0, -3.0, -3.0, 1.5, 1.5, 4.5, 3.0, -3.0, -4.5, -1.5, -1.5, 0.5, 0.5, 1.5, 1.0, -1.0, -1.5, -0.5, -0.5
## end
#454, 142:
0.0, 0.0, 100.0, 200.0, 200.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 200.0, 200.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 200.0, 200.0, 100.0, 0.0, 0.0
## end
#456, 26:
-50.0, -50.0, 300.0, 200.0
## end
#458, 22:
0.0, 0.0, 100.0, 200.0
## end
#460, 2:
曲线
## end
#471, 10:
120.0, 0.0
## end
#475, 6:
800e-9
## end
#477, 19:
0.10800000011057626
## end
#493, 10:
-50.0, 0.0
## end
#495, 4:
-2.0
## end
#498, 16:
文档\S应用\网页画板.ftxt
## end
#500, 888:
<!--
+[H函数](,验证例子)
-->
<b><u>Single lens</u></b><br>
The formula is,
$$
\frac{1}{f}=\frac{1}{u}+\frac{1}{v}
$$
For example, 
$$
f=100, u=-100, v=50, M=2
$$


<b><u>Double lens</u></b><br>
Here are two lenses with focal length \(f_1\) and \(f_2\). The distance between two lenses are \(D\). Then we have,
$$
\frac{1}{f_1}=\frac{1}{u}+\frac{1}{v_1}
$$
$$
u_2=D-v_1
$$
$$
\frac{1}{f_2}=\frac{1}{u_2}+\frac{1}{v}
$$

Then we can solve the equations, 
$$
v_1=\frac{f_1 u}{u-f_1}
\\
u_2=D-v_1
\\
v=\frac{f_2 u_2}{u_2-f_2}
$$
The magnification is,
$$
M=\frac{v}{u_2}\cdot\frac{v_1}{u}
=
\frac{f_2}{u_2-f_2}
\frac{f_1}{u-f_1}
$$
And we have,
$$
u_2-f_2=D-f_2-v_1
=D-f_2-\frac{f_1 u}{u-f_1}
$$
So, 
$$
M=\frac{f_1 f_2}{(D-f_2)(u-f_1)-u f_1}
$$

For example, the \(4f\) system,
$$
f_1=100, f_2=100, D=200
$$$$
u=201, v=-1, M=-1
$$



<!--
单透镜(M函数):...
双透镜(M函数):...
+[新建阅读窗口](,单透镜)
+[H函数](,验证例子)
-->
## end
#502, 114:
%{
+[M函数](,单透镜)
%}

f=100;
v=300;

u=f*v/(v-f);
M=v/u;

disp(sprintf('f=%.2f, u=%.2f, v=%.2f, M=%.2f',f,u,v,M))



## end
#504, 223:
%{
+[M函数](,双透镜)
%}

f1=100;
D=200;
f2=100;
u=201;

v1=f1*u/(u-f1);
u2=D-v1;
v=f2*u2/(u2-f2);

M=v/u2*v1/u;

disp(sprintf('f1=%.2f, f2=%.2f, D=%.2f',f1,f2,D))
disp(sprintf('u=%.2f, v=%.2f, M=%.2f',u,v,M))

%{
+[M函数](,双透镜)
%}
## end
#507, 875:
+[返回目录](,双透镜场景)
+[删除结构](,双透镜场景)
+[显示星图](,双透镜场景)


+iris, +白板都是平面. +L1, +L2都是透镜

L1是高20, 宽5的透镜. L1的焦距是"100". L2是高20, 宽5的透镜. L2的焦距是"100"
L1距离iris为(100,0). L2距离L1为(200,0). 白板距离L2为(100,0)
L1的焦距是什么

光路::
光路由iris, L1, L2, 白板构成
光线::
光线由+初始焦点, +初始直径, +路径构成
光线的路径是光路. 光线的初始焦点是"-50". 光线的初始直径是"6,3,1". 光线的路径是什么
光线从iris出发. 画出光线的传播轨迹

光线的初始焦点是"-150". 画出光线的传播轨迹
光线的初始直径是什么
+[显示PPT图形](,光线)

光斑::
+上面(光线,光斑)
光斑距离L1为(20,0). 光斑的波长是"800e-9". 计算光斑的直径. 光斑的直径是什么

成像过程::
成像过程的路径是光路. 成像过程的像是白板. 成像过程的物是iris. 成像过程的物是什么
计算成像过程的放大率和像距. 
计算成像过程的放大率和物距. 成像过程的放大率是什么
白板在什么位置. iris在什么位置. 成像过程的放大率是什么

L1的焦距是"100". L1的焦距是什么. 白板距离L2为(50,0)
L1在什么位置. 白板在什么位置. 成像过程的物是什么. 成像过程的像是什么
计算成像过程的放大率和物距. iris在什么位置. 成像过程的放大率是什么


L1的焦距是"100". L1的焦距是什么. 
iris距离L1为(-101,0)
L1在什么位置. 白板在什么位置. 成像过程的物是什么. 成像过程的像是什么
计算成像过程的放大率和像距. 白板在什么位置. 成像过程的放大率是什么
计算成像过程的放大率和物距. 画出成像过程的光线路线
白板在什么位置
成像过程的像是什么








+[显示PPT场景](,双透镜场景)
## end
#528, 11:
10.0, -10.0
## end
#530, 8:
0.0, 0.0
## end
#532, 2:
曲线
## end
#533, 1:
0
## end
#535, 10:
399.0, 0.0
## end
#537, 11:
10.0, -10.0
## end
#539, 8:
0.0, 0.0
## end
#541, 2:
曲线
## end
#542, 1:
0
## end
#544, 9:
-1.0, 0.0
## end
#572, 3:
100
## end
#574, 56:
7.5, 10.0, 7.5, nan, 10.0, -10.0, nan, -7.5, -10.0, -7.5
## end
#576, 50:
-2.5, 0.0, 2.5, nan, 0.0, 0.0, nan, -2.5, 0.0, 2.5
## end
#578, 2:
曲线
## end
#579, 1:
0
## end
#581, 10:
300.0, 0.0
## end
#583, 3:
100
## end
#585, 56:
7.5, 10.0, 7.5, nan, 10.0, -10.0, nan, -7.5, -10.0, -7.5
## end
#587, 50:
-2.5, 0.0, 2.5, nan, 0.0, 0.0, nan, -2.5, 0.0, 2.5
## end
#589, 2:
曲线
## end
#590, 1:
0
## end
#592, 10:
100.0, 0.0
## end
#608, 5:
6,3,1
## end
#609, 3:
-50
## end
#615, 163:
3.0, 3.0, 9.0, 3.0, -3.0, 3.0, -3.0, -9.0, -3.0, -3.0, 1.5, 1.5, 4.5, 1.5, -1.5, 1.5, -1.5, -4.5, -1.5, -1.5, 0.5, 0.5, 1.5, 0.5, -0.5, 0.5, -0.5, -1.5, -0.5, -0.5
## end
#617, 184:
0.0, 0.0, 100.0, 300.0, 400.0, 400.0, 300.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 300.0, 400.0, 400.0, 300.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 300.0, 400.0, 400.0, 300.0, 100.0, 0.0, 0.0
## end
#619, 32:
-50.0, -50.0, 300.0, 50.0, -50.0
## end
#621, 29:
0.0, 0.0, 100.0, 300.0, 400.0
## end
#623, 2:
曲线
## end
#638, 19:
-1.0000000000000002
## end
#641, 844:
;





+光束传播(_光束,)->+[del](,+光束传播)...
->的(光束传播,出发代码)->的(光束传播,传播代码)->的(光束传播,输出代码)...
->的(_光束,初始焦点)->的(_光束,透镜位置)->的(_光束,焦点)...
->+[临时文本]->[]{
    出发(+光束传播,_激光)->_激光->在(_激光,空间点)...
    ->+[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],初始焦点)...
    ->+[增加内容](,+[临时文本])
}->[]{
    []=>经过(+光束传播,_M)->_M=>在(_M,空间点)...
    ->+[标题](_M,)->+[模板文本](传播代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]):
        ->的(_M,焦距)->+[.](+[模板文本],焦距),
        ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
}->[]{
    到达(+光束传播,_屏幕)->_屏幕->在(_屏幕,空间点)...
    ->+[标题](_屏幕,)->+[模板文本](输出代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本])
}...

->+[matlab](Matlab,)->+[code](+[matlab],+[临时文本])...
->+[o]"X"(+[matlab],透镜位置)->+[o]"V"(+[matlab],焦点)...

->+[更新图形](+聚焦光束,_光束)->+[del](,+聚焦光束)


## end
#642, 28:
0.0, -0.0, 300.0, 50.0, -0.0
## end
#644, 33:
-50.0, -50.0, 100.0, 300.0, 350.0
## end
#646, 53:
0.0, -0.0, 10099.99999999999, 98.99999999999999, -0.0
## end
#648, 31:
-1.0, -1.0, 100.0, 300.0, 399.0
## end
#650, 410:
%{
+[M函数](,M代码)
%}

% d0=1;
% f=[1,1,1,1];
% pos=[0,2,4,6,8];

r=d0'/2;
x=ones(size(r))*pos;
y=zeros(size(x));
y(:,1)=r;
for i=1:length(f)-1
    Dx=pos(i+1)-pos(i);
    Dy=-Dx/f(i)*r;
    r=r+Dy;
    y(:,i+1)=r;
end

y2=fliplr(-y);
y=[y,y2];
y=reshape(y',1,numel(y));
x2=fliplr(x);
x=[x,x2];
x=reshape(x',1,numel(x));

% plot(x',y')

%{
+[M函数](,M代码)
+[matlab]"fliplr(x(:,1)')"(Matlab,)
+[matlab]"x"(Matlab,)
%}
## end
#652, 377:
"""
+[返回目录](,聚焦光束)
M代码:...

"""

+聚焦光束(更新图形,_图形)->+[del](,+聚焦光束)...
->的(聚焦光束,M代码)...
->的(_图形,焦点)->的(_图形,透镜位置)->的(_图形,初始直径)...
->的(_图形,x)->的(_图形,y)...
->+[matlab](Matlab,)->+[code](+[matlab],M代码)...
->+[.]"f"(+[matlab],焦点)...
->+[.]"d0"(+[matlab],初始直径)->+[.]"pos"(+[matlab],透镜位置)...
->+[o](+[matlab],x)->+[o](+[matlab],y):
    ->样式(_图形,)->+[修改内容]"曲线"(,样式),
    ->+样式"曲线"(_图形,)


## end
#654, 111:
10.0, 10.0, 5.0, -14.9009900990099, -9.999999999999996, -9.999999999999995, -24.7029702970297, -5.0, 10.0, 10.0
## end
#656, 64:
-1.0, -1.0, 100.0, 300.0, 399.0, 399.0, 300.0, 100.0, -1.0, -1.0
## end
#662, 2:
曲线
## end
#704, 60:
+[返回目录](,画成像过程)

匹配模板::画出%[过程]的光线路线
输出模板::+[光束传播](%[过程],)



## end
#706, 15:
+[光束传播](%[过程],)
## end
#708, 12:
画出%[过程]的光线路线
## end
#714, 17:
文档\物理问题\计算波前.ftxt
## end
#716, 750:
+[返回目录](,望远镜场景)
+[删除结构](,望远镜场景)
+[显示星图]"2"(,望远镜场景)


+灰尘, +光斑
+iris, +白板都是平面. +L1, +L2都是透镜

L1是高20, 宽5的透镜. 
L2是高40, 宽5的透镜
L1的焦距是"-100". L2的焦距是"300"
iris在(0,0). L1距离iris为(100,0). L2距离L1为(200,0). 白板距离L2为(100,0)
L1的焦距是什么

光路::
光路由iris, L1, L2, 白板构成
光线::
光线由+初始焦点, +初始直径, +路径构成
光线的路径是光路. 光线的初始焦点是"-200". 光线的初始直径是"6,3,1". 光线的路径是什么
光线从iris出发. 
L2距离L1为(500,0). 
白板距离L2为(1000,0)
画出光线的传播轨迹
L2的是什么
L1的焦距是什么. L2的焦距是什么


成像过程::
成像过程的路径是光路. 成像过程的像是光斑. 成像过程的物是灰尘. 成像过程的物是什么
计算成像过程的放大率和像距. 
计算成像过程的放大率和物距. 成像过程的放大率是什么
白板在什么位置. iris在什么位置. 成像过程的放大率是什么

光斑距离白板为(0,0)
计算成像过程的放大率和物距. 画出成像过程的光线路线
+[计算成像过程](,成像过程)->+[计算物距](+[计算成像过程],)
+[光束传播](成像过程,)
白板在什么位置
+[设置结构](,成像过程)
成像过程的放大率是什么
成像过程的像是什么


是([动词库],动词)->+[打开文件](+新窗口,动词)




+[显示PPT场景]"2"(,光路)
+[显示PPT场景]"1"(,望远镜场景)
## end
#737, 11:
10.0, -10.0
## end
#739, 8:
0.0, 0.0
## end
#741, 2:
曲线
## end
#742, 1:
0
## end
#744, 11:
1150.0, 0.0
## end
#746, 11:
10.0, -10.0
## end
#748, 8:
0.0, 0.0
## end
#750, 2:
曲线
## end
#751, 1:
0
## end
#753, 3:
0,0
## end
#781, 3:
300
## end
#783, 60:
17.5, 20.0, 17.5, nan, 20.0, -20.0, nan, -17.5, -20.0, -17.5
## end
#785, 50:
-2.5, 0.0, 2.5, nan, 0.0, 0.0, nan, -2.5, 0.0, 2.5
## end
#787, 2:
曲线
## end
#788, 1:
0
## end
#790, 10:
600.0, 0.0
## end
#792, 4:
-100
## end
#794, 60:
12.5, 10.0, 12.5, nan, 10.0, -10.0, nan, -12.5, -10.0, -12.5
## end
#796, 50:
2.5, 0.0, -2.5, nan, 0.0, 0.0, nan, 2.5, 0.0, -2.5
## end
#798, 2:
曲线
## end
#799, 1:
0
## end
#801, 10:
100.0, 0.0
## end
#819, 4:
-200
## end
#823, 5:
6,3,1
## end
#827, 209:
3.0, 3.0, 4.5, 34.5, 4.25, -4.25, -34.5, -4.5, -3.0, -3.0, 1.5, 1.5, 2.25, 17.25, 2.125, -2.125, -17.25, -2.25, -1.5, -1.5, 0.5, 0.5, 0.75, 5.75, 0.708333333333333, -0.708333333333333, -5.75, -0.75, -0.5, -0.5
## end
#829, 190:
0.0, 0.0, 100.0, 600.0, 1150.0, 1150.0, 600.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 600.0, 1150.0, 1150.0, 600.0, 100.0, 0.0, 0.0, 0.0, 0.0, 100.0, 600.0, 1150.0, 1150.0, 600.0, 100.0, 0.0, 0.0
## end
#831, 59:
-200.0, -200.0, -75.0, 627.2727272727273, 77.27272727272725
## end
#833, 30:
0.0, 0.0, 100.0, 600.0, 1150.0
## end
#835, 2:
曲线
## end
#850, 18:
2.9999999999999996
## end
#852, 117:
10.0, 5.0, 7.8125, 29.062500000000004, 30.000000000000004, 30.000000000000007, 27.187500000000004, 3.4375, -5.0, 10.0
## end
#854, 90:
177.77777777777777, 0.0, 100.0, 300.0, 400.0, 400.0, 300.0, 100.0, 0.0, 177.77777777777777
## end
#856, 86:
0.0, 177.77777777777777, 349.99999999999983, 99.99999999999993, -5.684341886080802e-14
## end
#858, 44:
177.77777777777777, 0.0, 100.0, 300.0, 400.0
## end
#860, 2:
曲线
## end
#881, 11:
10.0, -10.0
## end
#883, 8:
0.0, 0.0
## end
#885, 2:
曲线
## end
#886, 1:
0
## end
#888, 10:
400.0, 0.0
## end
#890, 11:
10.0, -10.0
## end
#892, 8:
0.0, 0.0
## end
#894, 2:
曲线
## end
#895, 1:
0
## end
#897, 23:
177.77777777777777, 0.0
## end
#962, 539:
p=[0,0];
x=p(1);
v=inf;

V=v;
X=x;


% 入口
p=[0,0];
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L0
p=[0*150+100,0];
u=p(1)-(v+x);
rv=1/-100-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L1
p=[1*150+100,0];
u=p(1)-(v+x);
rv=1/100-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L2
p=[2*150+100,0];
u=p(1)-(v+x);
rv=1/100-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L3
p=[3*150+100,0];
u=p(1)-(v+x);
rv=1/100-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% 出口
p=[4*150+100,0];
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

## end
#963, 17:
文档\物理问题\计算波前.ftxt
## end
#965, 1282:
"""
+[返回目录](,光束扫参数)

出发代码:...
传播代码:...
光斑代码:...
整体框架:...
光斑代码的"f0"替换为"V"

保存代码:...
例子:...
+[新建阅读窗口](,例子)

"""

+光束扫参数(_光束,_光斑)->+[del](,+光束扫参数)...
->的(光束扫参数,出发代码)->的(光束扫参数,传播代码)...
->的(光束扫参数,光斑代码)->的(光束扫参数,整体框架)...
->的(光束扫参数,保存代码)...

->的(_光束,路径)->路径(,_光路)...
->的(_光束,初始焦点)...
->+[临时文本]->[]{
    出发(_光束,_激光)->_激光->在(_激光,空间点)...
    ->+[模板文本](出发代码,+[增加内容])...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],初始焦点)...
    ->+[增加内容](,+[临时文本])
}->+[临时文本]#2->+[临时文本]#输入->[]{
    []=>的(_光路,_M)->_M=>在(_M,空间点)...
    ->+[修改内容](+[临时文本]#2,+[增加内容])...
    ->+[标题](_M,)->+[模板文本](传播代码,+[临时文本]#2)...
    ->+[.](+[模板文本],空间点)->+[.](+[模板文本],+[标题])...
    ->+[增加内容](,+[临时文本]#2)->[]{
        []:->的(_M,焦距)->焦距->+[.](+[模板文本],焦距),
            ->+[临时文本]#1"inf"->+[.]"焦距"(+[模板文本],+[临时文本]#1)
    }->[]{
        []:->的(_M,位移)->位移->+[.](+[模板文本],位移)->[]{
            []:->[==](,+[临时文本]#输入)->[m_text](位移,+[临时文本]#输入),
                ->+[增加内容]","(位移,+[临时文本]#输入)
            },
        ->+[临时文本]#1"0"->+[.]"位移"(+[模板文本],+[临时文本]#1)
    }
}...
->+[临时文本]#光斑->[]{
    在(_光斑,空间点#0)->空间点#0->+[模板文本](光斑代码,+[临时文本]#光斑)...
    ->+[.]"光斑"(+[模板文本],空间点#0)
}...

->+[增加内容](+[临时文本]#2,+[临时文本])...
->+[增加内容](+[临时文本]#光斑,+[临时文本])...

->+[模板文本](整体框架,保存代码)...
->+[.]"程序本体"(+[模板文本],+[临时文本])->+[.]"输入"(+[模板文本],+[临时文本]#输入)...

->+[保存文本](,保存代码)



## end
#967, 60:
%{
+[M函数](,保存代码)
%}

p=[%空间点];
x=p(1);
v=%初始焦点;

V=v;
X=x;


## end
#969, 85:

% %[标题]
p=[%空间点]+%位移;
u=p(1)-(v+x);
rv=1/%焦距-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

## end
#971, 590:

% shape
d0=5;

r=d0'/2;
f=V;
x=ones(size(r))*X;
y=zeros(size(x));
y(:,1)=r;
for i=1:length(f)-1
    Dx=X(i+1)-X(i);
    Dy=-Dx/f(i)*r;
    r=r+Dy;
    y(:,i+1)=r;
end

y2=fliplr(-y);
y=[y,y2];
y=reshape(y',1,numel(y));
x2=fliplr(x);
x=[x,x2];
x=reshape(x',1,numel(x));

x0=x;
y0=y;
f0=f;


% diameter
addpath('Matlab\optics');

lm=800e-9;


f=f0*1e-3;
y=y0(1,1:length(f0))*1e-3;
x=x0(1,1:length(f0))*1e-3;
z=[%光斑]*1e-3;
z=z(1);

i=max(find(z>x(1:end-1)));
z0=x(i)+f(i);
w=abs(y(i));
N=f(i)/2/w;
w0=2*N/pi*lm;

%w0
d=2*GaussianBeam_w(z,w0,lm,z0);
%disp(sprintf('Diameter: %.3f mm',d/1e-3))

## end
#973, 1280:
%{
地址::Matlab\optics\lens_scanning.m
+[保存文本](,整体框架)
%}

function [d,V,X]=lens_scanning(dp1,dp5)

%{
+[M函数](,保存代码)
%}

p=[0,0];
x=p(1);
v=inf;

V=v;
X=x;


% A0
p=[0,0]+0;
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L1
p=[158.75, 0.0]+dp1;
u=p(1)-(v+x);
rv=1/150-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L2
p=[220.25, 0.0]+0;
u=p(1)-(v+x);
rv=1/-80-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L3
p=[336.55, 0.0]+0;
u=p(1)-(v+x);
rv=1/200-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L5
p=[638.725, 0.0]+dp5;
u=p(1)-(v+x);
rv=1/40-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% NC1
p=[846.725, 0.0]+0;
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% shape
d0=5;

r=d0'/2;
f=V;
x=ones(size(r))*X;
y=zeros(size(x));
y(:,1)=r;
for i=1:length(f)-1
    Dx=X(i+1)-X(i);
    Dy=-Dx/f(i)*r;
    r=r+Dy;
    y(:,i+1)=r;
end

y2=fliplr(-y);
y=[y,y2];
y=reshape(y',1,numel(y));
x2=fliplr(x);
x=[x,x2];
x=reshape(x',1,numel(x));

x0=x;
y0=y;
f0=f;


% diameter
addpath('Matlab\optics');

lm=800e-9;


f=f0*1e-3;
y=y0(1,1:length(f0))*1e-3;
x=x0(1,1:length(f0))*1e-3;
z=[846.725, 0.0]*1e-3;
z=z(1);

i=max(find(z>x(1:end-1)));
z0=x(i)+f(i);
w=abs(y(i));
N=f(i)/2/w;
w0=2*N/pi*lm;

%w0
d=2*GaussianBeam_w(z,w0,lm,z0);
%disp(sprintf('Diameter: %.3f mm',d/1e-3))


end


## end
#975, 1184:
%{
+[M函数](,例子)
%}

p=[0,0];
x=p(1);
v=inf;

V=v;
X=x;
dp=-10;

% A0
p=[0,0];
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L1
p=[158.75, 0.0];
u=p(1)-(v+x);
rv=1/150-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L2
p=[220.25, 0.0];
u=p(1)-(v+x);
rv=1/-80-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L3
p=[336.55, 0.0]+dp;
u=p(1)-(v+x);
rv=1/200-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% L5
p=[638.725, 0.0];
u=p(1)-(v+x);
rv=1/40-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% NC1
p=[846.725, 0.0];
u=p(1)-(v+x);
rv=1/inf-1/u;
v=1/rv;
x=p(1);
V=[V,v];
X=[X,x];

% shape
d0=5;

r=d0'/2;
f=V;
x=ones(size(r))*X;
y=zeros(size(x));
y(:,1)=r;
for i=1:length(f)-1
    Dx=X(i+1)-X(i);
    Dy=-Dx/f(i)*r;
    r=r+Dy;
    y(:,i+1)=r;
end

y2=fliplr(-y);
y=[y,y2];
y=reshape(y',1,numel(y));
x2=fliplr(x);
x=[x,x2];
x=reshape(x',1,numel(x));

x0=x;
y0=y;
f0=f;


% diameter
addpath('Matlab\optics');

lm=800e-9;


f=f0*1e-3;
y=y0(1,1:length(f0))*1e-3;
x=x0(1,1:length(f0))*1e-3;
z=800*1e-3;

i=max(find(z>x(1:end-1)));
z0=x(i)+f(i);
w=abs(y(i));
N=f(i)/2/w;
w0=2*N/pi*lm;

%w0
d=2*GaussianBeam_w(z,w0,lm,z0);
disp(sprintf('Diameter: %.3f mm',d/1e-3))


plot(x0,y0)

%{
pos
+[M函数](,例子)
%}
## end
#977, 105:
%{
地址::Matlab\optics\lens_scanning.m
+[保存文本](,整体框架)
%}

function [d,V,X]=lens_scanning(%输入)

%程序本体

end


## end
#979, 29:
Matlab\optics\lens_scanning.m
## end
#981, 29:
Matlab\optics\lens_scanning.m
## end
#985, 12:
^计算%[光斑]的直径$
## end
#986, 17:
+[计算光斑直径](,%[光斑])
## end
#989, 64:
+[返回目录](,计算光斑直径)


匹配模板::^计算%[光斑]的直径$
输出模板::+[计算光斑直径](,%[光斑])



## end
### 结束